(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{566:function(s,e,a){"use strict";a.r(e);var n=a(6),t=Object(n.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[a("img",{attrs:{src:"/imgs/docker/0.png",alt:"docker"}})]),s._v(" "),a("p",[s._v("其实这篇文章在一年多前就起好名字了，因为之前自己对 Docker 的镜像，容器等概念比较混淆，所以一直都没有写。由于最近重新看了 Docker 的内容，也将 Docker 应用到自己写的 Python 项目 "),a("a",{attrs:{href:"https://github.com/AD-feiben/qc-remind",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/AD-feiben/qc-remind"),a("OutboundLink")],1),s._v(" 中，将该 Python 项目制作成一个 Docker 镜像，在使用起来非常方便，所以用这篇文章记录一下 Docker 的一些知识点，同时分享给大家。关于如何制作镜像也会在以后的文章中讲到。")]),s._v(" "),a("p",[s._v("这篇文章不会讲述以下问题，什么是 Docker、Docker 的历史、Docker 通过什么技术实现、以及为什么要使用 Docker。这里就不在搬运了网上的文章了，直接上手学习 Docker。")]),s._v(" "),a("ul",[a("li",[s._v("如果对上面所讲的问题感兴趣的话，可以访问 "),a("a",{attrs:{href:"https://yeasy.gitbooks.io/docker_practice/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://yeasy.gitbooks.io/docker_practice/"),a("OutboundLink")],1),s._v(" 进行学习")])]),s._v(" "),a("h2",{attrs:{id:"一、安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、安装"}},[s._v("#")]),s._v(" 一、安装")]),s._v(" "),a("p",[s._v("因为我的是 Mac，这里只讲 Mac 的安装，其他系统的安装可以参考 "),a("a",{attrs:{href:"https://yeasy.gitbooks.io/docker_practice/install/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://yeasy.gitbooks.io/docker_practice/install/"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"_1-1-使用-homebrew-安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-使用-homebrew-安装"}},[s._v("#")]),s._v(" 1.1 使用 Homebrew 安装")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ brew cask "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("使用 "),a("code",[s._v("brew cask")]),s._v(" 安装即可")]),s._v(" "),a("h3",{attrs:{id:"_1-2-手动下载安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-手动下载安装"}},[s._v("#")]),s._v(" 1.2 手动下载安装")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("首先在 Docker 官网 "),a("a",{attrs:{href:"https://www.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.docker.com"),a("OutboundLink")],1),s._v(" 注册一个账号，登录账号")])]),s._v(" "),a("li",[a("p",[s._v("进入 "),a("a",{attrs:{href:"https://hub.docker.com/?overlay=onboarding",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://hub.docker.com/?overlay=onboarding"),a("OutboundLink")],1),s._v(" 下载安装即可")])])]),s._v(" "),a("p",[a("img",{attrs:{src:"/imgs/docker/1.png",alt:"下载 "}})]),s._v(" "),a("p",[s._v("下载完成之后双击 .dmg 文件，将应用拖到 Application 文件夹中即可。安装完成后，在状态栏就可以看到 Docker 的 logo，说明安装成功。可以通过 "),a("code",[s._v("docker --version")]),s._v(" 命令查看 Docker 的版本。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ docker --version\nDocker version "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.03")]),s._v(".2, build 6a30dfc\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"二、docker-的一些概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、docker-的一些概念"}},[s._v("#")]),s._v(" 二、Docker 的一些概念")]),s._v(" "),a("p",[a("img",{attrs:{src:"/imgs/docker/2.png",alt:"Docker 的一些概念"}})]),s._v(" "),a("p",[s._v("镜像存放在镜像仓库中，Docker 官方也提供了镜像仓库 "),a("a",{attrs:{href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://hub.docker.com/"),a("OutboundLink")],1),s._v(" ，我们可以从这里下载我们所需要的镜像，当然也可以将我们制作好的镜像存放到仓库中。当我们下载好镜像之后，我们可以通过 "),a("code",[s._v("run")]),s._v(" 命令来创建对应的容器，一个镜像可以创建多个容器，每个容器，相互之间不会产生影响。")]),s._v(" "),a("h3",{attrs:{id:"_2-1-image-镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-image-镜像"}},[s._v("#")]),s._v(" 2.1 image 镜像")]),s._v(" "),a("p",[s._v("以下镜像的操作均以 Nginx 镜像为例")]),s._v(" "),a("h4",{attrs:{id:"_2-1-1-搜索镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-1-搜索镜像"}},[s._v("#")]),s._v(" 2.1.1 搜索镜像")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ docker search nginx\nNAME                              DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED\nnginx                             Official build of Nginx.                        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12022")]),s._v("               "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\njwilder/nginx-proxy               Automated Nginx reverse proxy "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" docker con…   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1669")]),s._v("                                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nricharvey/nginx-php-fpm           Container running Nginx + PHP-FPM capable of…   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("742")]),s._v("                                     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nlinuxserver/nginx                 An Nginx container, brought to you by LinuxS…   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("77")]),s._v("\nbitnami/nginx                     Bitnami nginx Docker Image                      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("71")]),s._v("                                      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\ntiangolo/nginx-rtmp               Docker image with Nginx using the nginx-rtmp…   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("55")]),s._v("                                      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nnginxdemos/hello                  NGINX webserver that serves a simple page co…   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v("                                      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\njlesage/nginx-proxy-manager       Docker container "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Nginx Proxy Manager        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v("                                      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\njc21/nginx-proxy-manager          Docker container "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" managing Nginx proxy ho…   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v("\nnginx/nginx-ingress               NGINX Ingress Controller "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Kubernetes         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("可以看到 "),a("code",[s._v("镜像名 镜像描述 点赞数 是否为官方镜像 是否为自动生成")])]),s._v(" "),a("h4",{attrs:{id:"_2-1-2-下载镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-2-下载镜像"}},[s._v("#")]),s._v(" 2.1.2 下载镜像")]),s._v(" "),a("p",[s._v("利用 "),a("code",[s._v("docker pull 镜像名[:版本]")]),s._v(" 下载我们需要的镜像，不输入版本号默认为 "),a("code",[s._v("latest")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ docker pull nginx\nUsing default tag: latest\nlatest: Pulling from library/nginx\nb8f262c62ec6: Pull complete\ne9218e8f93b1: Pull complete\n7acba7289aa3: Pull complete\nDigest: sha256:aeded0f2a861747f43a01cf1018cf9efe2bdd02afd57d2b11fcc7fcadc16ccd1\nStatus: Downloaded newer image "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" nginx:latest\ndocker.io/library/nginx:latest\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h4",{attrs:{id:"_2-1-3-列出本地镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-3-列出本地镜像"}},[s._v("#")]),s._v(" 2.1.3 列出本地镜像")]),s._v(" "),a("p",[s._v("可以使用 "),a("code",[s._v("docker image ls")]),s._v(" 或者 "),a("code",[s._v("docker images")]),s._v(" 来列出本地存在的镜像")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nnginx               latest              f949e7d76d63        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" days ago          126MB\ncentos              latest              67fa590cfc1c        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" weeks ago         202MB\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("其中 "),a("code",[s._v("REPOSITORY")]),s._v(" 为镜像名；"),a("code",[s._v("TAG")]),s._v(" 为镜像标签；"),a("code",[s._v("IMAGE ID")]),s._v(" 为镜像id；"),a("code",[s._v("CREATED")]),s._v(" 为镜像创建时间；"),a("code",[s._v("SIZE")]),s._v(" 为镜像大小，该大小为解压缩后的大小，一般比仓库中的现实的镜像大小（压缩后的大小，便于传输）要大一些。")]),s._v(" "),a("h4",{attrs:{id:"_2-1-4-删除镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-4-删除镜像"}},[s._v("#")]),s._v(" 2.1.4 删除镜像")]),s._v(" "),a("p",[s._v("通过 "),a("code",[s._v("docker image rm 镜像名/镜像id")]),s._v(" 或者 "),a("code",[s._v("docker rmi 镜像名/镜像id")]),s._v(" 来删除指定的镜像")]),s._v(" "),a("ul",[a("li",[s._v("删除镜像时，需要该镜像没有被使用，否则将会看到类似下面的错误提示")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ docker rmi nginx\nError response from daemon: conflict: unable to remove repository reference "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("must force"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" - container b36481b353d3 is using its referenced image f949e7d76d63\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("在 Docker 仓库中还有很多优秀的镜像，例如 Ubuntu、CentOS、MySQL 等，大家可以自行查找。")]),s._v(" "),a("h3",{attrs:{id:"_2-2-container-容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-container-容器"}},[s._v("#")]),s._v(" 2.2 container 容器")]),s._v(" "),a("h4",{attrs:{id:"_2-2-1创建容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1创建容器"}},[s._v("#")]),s._v(" 2.2.1创建容器")]),s._v(" "),a("p",[s._v("我们可以使用 "),a("code",[s._v("docker run [选项] 镜像")]),s._v(" 来创建一个容器，如果镜像在本地不存在，则会先到镜像仓库下载该镜像。下面的例子是 nginx 镜像不存在的情况。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ docker run -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(":80 nginx\nUnable to "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" image "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'nginx:latest'")]),s._v(" locally\nlatest: Pulling from library/nginx\nb8f262c62ec6: Pull complete\ne9218e8f93b1: Pull complete\n7acba7289aa3: Pull complete\nDigest: sha256:aeded0f2a861747f43a01cf1018cf9efe2bdd02afd57d2b11fcc7fcadc16ccd1\nStatus: Downloaded newer image "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" nginx:latest\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 终端处于监听容器日志的状态")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("ul",[a("li",[a("code",[s._v("-p")]),s._v(" 参数将容器中的 "),a("code",[s._v("80")]),s._v(" 端口映射到宿主机中的 "),a("code",[s._v("8080")]),s._v(" 端口")])]),s._v(" "),a("p",[s._v("在浏览器打开 "),a("code",[s._v("localhost:8080")]),s._v(" 就可以看到熟悉的 nginx 欢迎页面了。退出容器可以使用 "),a("code",[s._v("Ctrl + C")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/imgs/docker/3.png",alt:"Nginx 欢迎页"}})]),s._v(" "),a("h4",{attrs:{id:"_2-2-2-查看运行中的容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-2-查看运行中的容器"}},[s._v("#")]),s._v(" 2.2.2 查看运行中的容器")]),s._v(" "),a("p",[s._v("我们可以使用 "),a("code",[s._v("docker ps")]),s._v(" 或者 "),a("code",[s._v("docker container ls")]),s._v(" 查看运行中的容器。")]),s._v(" "),a("blockquote",[a("p",[s._v("上一步骤通过 "),a("code",[s._v("Ctrl + C")]),s._v("  停止了容器")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ docker "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("可以看到并没有运行中的容器，我们可以加上 "),a("code",[s._v("-a")]),s._v("  显示所有容器，包括停止状态的容器")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ docker "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -a\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                     PORTS               NAMES\na2d6842faeb5        nginx               "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx -g \'daemon of…"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" hours ago         Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" minutes ago                       crazy_northcutt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("加上 "),a("code",[s._v("-a")]),s._v(" 后我们就可以看到已经处于停止状态的容器。")]),s._v(" "),a("p",[s._v("下一步通过下面命令启动一个新的容器")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ docker run -dit -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(":80 nginx\nb36481b353d30976171cf7c706f4ce4890f81ee1a81c7e526799fb12198e7f23\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[a("p",[a("code",[s._v("-dit")]),s._v(" 参数也可以分开写为 "),a("code",[s._v("-d -i -t")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("-d")]),s._v(" 参数表示容器在后台运行，并不会像上个例子处于监听容器日志的状态")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("-i")]),s._v(" 参数表示让容器的标准输入保持打开")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("-t")]),s._v(" 参数表示让 Docker 分配一个伪终端")])])]),s._v(" "),a("p",[s._v("可以看到这次的结果并不像 "),a("code",[s._v("docker run -p 8080:80 nginx")]),s._v(" 那样，返回一个容器id后。终端又恢复到正常状态。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ docker "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -a\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                      PORTS                  NAMES\nb36481b353d3        nginx               "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx -g \'daemon of…"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" minutes ago      Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" minutes               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:8080-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/tcp   recursing_khayyam\na2d6842faeb5        nginx               "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx -g \'daemon of…"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" hours ago         Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" minutes ago                          crazy_northcutt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("通过 "),a("code",[s._v("docker ps -a")]),s._v(" 命令可以看到，docker 存在两个容器。从这个例子我们可以知道，同一个镜像，如果使用 "),a("code",[s._v("run")]),s._v(" 命令创建容器，那么每个容器都是不同的实例。")]),s._v(" "),a("h4",{attrs:{id:"_2-2-3-停止容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-3-停止容器"}},[s._v("#")]),s._v(" 2.2.3 停止容器")]),s._v(" "),a("p",[s._v("如果容器处在后台运行，我们可以通过 "),a("code",[s._v("docker ps")]),s._v(" 或者 "),a("code",[s._v("docker container ls")]),s._v(" 将运行中的容器实例获取到，然后通过 "),a("code",[s._v("docker container stop 容器id/容器名")]),s._v(" 停止指定容器。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ docker container stop b36481b353d3\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# b36481b353d3 为第二个容器例子，后台运行的容器")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"_2-2-4-启动容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-4-启动容器"}},[s._v("#")]),s._v(" 2.2.4 启动容器")]),s._v(" "),a("p",[s._v("当然容器也是可以重新启动的，不需要每次创建。通过 "),a("code",[s._v("docker container start 容器id")]),s._v(" 即可重新启动")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ docker container start b36481b353d3\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("通过 "),a("code",[s._v("start")]),s._v(" 命令启动的容器都会在后台运行。")])]),s._v(" "),a("h4",{attrs:{id:"_2-2-5-进入容器内"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-5-进入容器内"}},[s._v("#")]),s._v(" 2.2.5 进入容器内")]),s._v(" "),a("p",[s._v("通过 "),a("code",[s._v("docker exec -it 容器id /bin/bash")]),s._v(" 命令进入容器内，通过 "),a("code",[s._v("-it")]),s._v(" 参数打开容器的交互式终端")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("docker "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it b36481b353d3 /bin/bash\nroot@b36481b353d3:/"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("我们可以在此修改容器内的东西，修改完后通过 "),a("code",[s._v("exit")]),s._v(" 退出容器，通过 "),a("code",[s._v("exec")]),s._v(" 命令进入容器，退出后容器仍处于运行的状态。")]),s._v(" "),a("h4",{attrs:{id:"_2-2-6-删除容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-6-删除容器"}},[s._v("#")]),s._v(" 2.2.6 删除容器")]),s._v(" "),a("p",[s._v("通过 "),a("code",[s._v("docker container rm 容器id")]),s._v(" 删除指定容器。用该方法只能删除一个容器，如果我们想要删除多个容器，可以用空格隔开容器id。如果想删除的容器非常多，可以使用 "),a("code",[s._v("docker container prune")]),s._v(" 删除所有处于停止状态的容器。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ docker container prune\nWARNING"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" This will remove all stopped containers.\nAre you sure you want to continue? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("y/N"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" y\nDeleted Containers:\na2d6842faeb5cf039420edd684714134c52ca683aefc53a3934792251310ed1d\n\nTotal reclaimed space: 0B\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("ul",[a("li",[s._v("删除容器时，容器需要处于停止状态。我们可以通过 "),a("code",[s._v("docker ps -a")]),s._v(" 查看停止状态的容器")])]),s._v(" "),a("h3",{attrs:{id:"_2-3-repository-仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-repository-仓库"}},[s._v("#")]),s._v(" 2.3 repository 仓库")]),s._v(" "),a("p",[s._v("由于篇幅问题，有关仓库的内容将会放到下一篇文章中。")]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("如果你喜欢我的文章，希望可以关注一下我的公众号【前端develop】")]),s._v(" "),a("p",[a("img",{attrs:{src:"/imgs/qrcode.png",alt:"前端develop"}})])])}),[],!1,null,null,null);e.default=t.exports}}]);